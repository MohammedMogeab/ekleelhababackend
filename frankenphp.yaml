# frankenphp.yaml
# Configuration for FrankenPHP in Worker Mode with Laravel

# Number of PHP worker threads (depends on CPU cores)
workers:
  num_threads: 8        # Adjust for your CPU (usually 2x your cores)
  max_requests: 1000    # Restart a worker after handling this many requests to avoid memory leaks

# Root public directory
root: ./public

# Entry point for worker mode
worker_script: ./public/worker.php

# Enable HTTP/1.1 + HTTP/2 + HTTPS (if you have certs)
listen:
  - addr: ":8000"
    tls: false           # Set true if you configure SSL below

# Environment variables (like Laravel .env)
env:
  APP_ENV: production
  APP_DEBUG: false
  APP_STORAGE: /tmp
  LOG_CHANNEL: stderr

# Static files optimization
static:
  enable: true
  # Cache control for static assets
  cache_control: "public, max-age=31536000, immutable"
  # Directories to serve static files from
  dirs:
    - public

# Graceful shutdown & logging
graceful_shutdown_timeout: 10s
log:
  level: info
  format: text
